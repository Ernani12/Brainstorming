{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _escape2 = require(\"lodash/escape\");\n\nvar _escape3 = _interopRequireDefault(_escape2);\n\nexports.default = headingToSlug;\n\nvar _slate = require(\"slate\");\n\nvar _slugify = require(\"slugify\");\n\nvar _slugify2 = _interopRequireDefault(_slugify);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // Slugify, escape, and remove periods from headings so that they are\n// compatible with url hashes AND dom selectors\n\n\nfunction safeSlugify(text) {\n  return \"h-\" + (0, _escape3.default)((0, _slugify2.default)(text, {\n    lower: true\n  }).replace(\".\", \"-\"));\n} // finds the index of this heading in the document compared to other headings\n// with the same slugified text\n\n\nfunction indexOfType(document, heading) {\n  var slugified = safeSlugify(heading.text);\n  var headings = document.nodes.filter(function (node) {\n    if (!node.text) return false;\n    return node.type.match(/^heading/) && slugified === safeSlugify(node.text);\n  });\n  return headings.indexOf(heading);\n} // calculates a unique slug for this heading based on it's text and position\n// in the document that is as stable as possible\n\n\nfunction headingToSlug(document, node) {\n  var slugified = safeSlugify(node.text);\n  var index = indexOfType(document, node);\n  if (index === 0) return slugified;\n  return slugified + \"-\" + index;\n}","map":null,"metadata":{},"sourceType":"script"}