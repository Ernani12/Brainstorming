{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _slateReact = require(\"slate-react\");\n\nvar _slate = require(\"slate\");\n\nvar _immutable = require(\"immutable\");\n\nvar _headingToSlug = require(\"../lib/headingToSlug\");\n\nvar _headingToSlug2 = _interopRequireDefault(_headingToSlug);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Contents = function (_React$Component) {\n  _inherits(Contents, _React$Component);\n\n  function Contents() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Contents);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Contents.__proto__ || Object.getPrototypeOf(Contents)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      activeHeading: undefined\n    }, _this.updateActiveHeading = function () {\n      var elements = _this.getHeadingElements();\n\n      if (!elements.length) return;\n      var activeHeading = elements[0].id;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = elements[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var element = _step.value;\n          var bounds = element.getBoundingClientRect();\n          if (bounds.top <= 0) activeHeading = element.id;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      if (_this.state.activeHeading !== activeHeading) {\n        _this.setState({\n          activeHeading: activeHeading\n        });\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Contents, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"scroll\", this.updateActiveHeading);\n      }\n\n      setImmediate(this.updateActiveHeading);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"scroll\", this.updateActiveHeading);\n      }\n    }\n  }, {\n    key: \"getHeadingElements\",\n    value: function getHeadingElements() {\n      var elements = [];\n      var tagNames = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = tagNames[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var tagName = _step2.value;\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = document.getElementsByTagName(tagName)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var ele = _step3.value;\n              elements.push(ele);\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return elements;\n    }\n  }, {\n    key: \"getHeadings\",\n    value: function getHeadings() {\n      var editor = this.props.editor;\n      return editor.value.document.nodes.filter(function (node) {\n        if (!node.text) return false;\n        return node.type.match(/^heading/);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var editor = this.props.editor;\n      var headings = this.getHeadings(); // If there are one or less headings in the document no need for a minimap\n\n      if (headings.size <= 1) return null;\n      return React.createElement(Wrapper, null, React.createElement(Sections, null, headings.map(function (heading) {\n        var slug = (0, _headingToSlug2.default)(editor.value.document, heading);\n        var active = _this2.state.activeHeading === slug;\n        return React.createElement(ListItem, {\n          type: heading.type,\n          active: active,\n          key: slug\n        }, React.createElement(Anchor, {\n          href: \"#\" + slug,\n          active: active\n        }, heading.text));\n      })));\n    }\n  }]);\n\n  return Contents;\n}(React.Component);\n\nvar Wrapper = _styledComponents2.default.div.withConfig({\n  displayName: \"Contents__Wrapper\",\n  componentId: \"sc-1x41345-0\"\n})([\"font-family:\", \";font-weight:\", \";font-size:1em;line-height:1.4;position:fixed;right:0;top:150px;z-index:\", \";@media print{display:none;}\"], function (props) {\n  return props.theme.fontFamily;\n}, function (props) {\n  return props.theme.fontWeight;\n}, function (props) {\n  return props.theme.zIndex;\n});\n\nvar Anchor = _styledComponents2.default.a.withConfig({\n  displayName: \"Contents__Anchor\",\n  componentId: \"sc-1x41345-1\"\n})([\"color:\", \";font-weight:\", \";opacity:0;transition:all 100ms ease-in-out;margin-right:-5px;padding:2px 0;pointer-events:none;text-overflow:ellipsis;text-decoration:none;&:hover{color:\", \";}\"], function (props) {\n  return props.active ? props.theme.text : props.theme.textSecondary;\n}, function (props) {\n  return props.active ? 500 : 400;\n}, function (props) {\n  return props.theme.primary;\n});\n\nvar ListItem = _styledComponents2.default.li.withConfig({\n  displayName: \"Contents__ListItem\",\n  componentId: \"sc-1x41345-2\"\n})([\"position:relative;margin-left:\", \";text-align:right;color:\", \";padding-right:16px;white-space:nowrap;&:after{color:\", \";content:\\\"\", \"\\\";position:absolute;right:0;}\"], function (props) {\n  return props.type.match(/heading[12]/) ? \"8px\" : \"16px\";\n}, function (props) {\n  return props.theme.textSecondary;\n}, function (props) {\n  return props.active ? props.theme.text : props.theme.textSecondary;\n}, function (props) {\n  return props.type.match(/heading[12]/) ? \"—\" : \"–\";\n});\n\nvar Sections = _styledComponents2.default.ol.withConfig({\n  displayName: \"Contents__Sections\",\n  componentId: \"sc-1x41345-3\"\n})([\"margin:0 0 0 -8px;padding:0;list-style:none;font-size:13px;width:100px;transition-delay:1s;transition:width 100ms ease-in-out;&:hover{width:300px;transition-delay:0s;\", \"{opacity:1;margin-right:0;background:\", \";pointer-events:all;}}\"], Anchor, function (props) {\n  return props.theme.background;\n});\n\nexports.default = Contents;","map":null,"metadata":{},"sourceType":"script"}