{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _slateReact = require('slate-react');\n\nvar _utils = require('../utils');\n/**\n * User is pasting content, insert it as text\n */\n\n\nfunction onPaste(opts, event, editor, next) {\n  var value = editor.value;\n  var data = (0, _slateReact.getEventTransfer)(event);\n  var currentCode = (0, _utils.getCurrentCode)(opts, value); // Only handle paste when selection is completely a code block\n\n  var endBlock = value.endBlock;\n\n  if (!currentCode || !currentCode.hasDescendant(endBlock.key)) {\n    return next();\n  } // Convert to text if needed\n\n\n  var text = void 0;\n\n  if (data.type === 'fragment') {\n    text = data.fragment.getTexts().map(function (t) {\n      return t.text;\n    }).join('\\n');\n  } else {\n    text = data.text;\n  } // Convert the text to code lines\n\n\n  var lines = (0, _utils.deserializeCode)(opts, text).nodes;\n\n  var fragment = _slate.Document.create({\n    nodes: lines\n  });\n\n  return editor.insertFragment(fragment);\n}\n\nexports.default = onPaste;","map":null,"metadata":{},"sourceType":"script"}